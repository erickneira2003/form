<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- This tells the browser to use UTF-8 character encoding (supports all major characters/languages) -->

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- This makes the page responsive on all devices (especially important for mobile) -->

  <title>Skincare Survey</title>
  <!-- The page title that appears in the browser tab -->

  <style>
    /* Base font and spacing */
    body {
      font-family: sans-serif;
      padding: 1rem;
    }

    /* All steps are hidden by default */
    .step {
      display: none;
    }

    /* Only the current step (active) is shown */
    .step.active {
      display: block;
    }

    /* Adds spacing above buttons */
    button {
      margin-top: 1rem;
    }
  </style>
</head>

<body>

  <!-- Main form container -->
  <form id="surveyForm">

    <!-- STEP 1 -->
    <div class="step active">
      <!-- The 'active' class makes this step visible at first -->
      <h2>What is your main skin concern?</h2>

      <!-- User can only choose ONE option (radio buttons with same 'name') -->
      <label><input type="radio" name="q1" value="Acne"> Acne</label><br>
      <label><input type="radio" name="q1" value="Wrinkles"> Wrinkles</label><br>
      <label><input type="radio" name="q1" value="Dryness"> Dryness</label><br>

      <!-- Move to next step -->
      <button type="button" onclick="nextStep()">Next</button>
    </div>

    <!-- STEP 2 -->
    <div class="step">
      <h2>How often do you use sunscreen?</h2>

      <!-- Again, user can select only one answer -->
      <label><input type="radio" name="q2" value="Daily"> Daily</label><br>
      <label><input type="radio" name="q2" value="Sometimes"> Sometimes</label><br>
      <label><input type="radio" name="q2" value="Never"> Never</label><br>

      <!-- Navigation buttons -->
      <button type="button" onclick="prevStep()">Back</button>
      <button type="button" onclick="nextStep()">Next</button>
    </div>

    <!-- STEP 3 -->
    <div class="step">
      <h2>Where do you live?</h2>

      <!-- Text input for user's location -->
      <input type="text" name="q3" placeholder="City or Region" required><br>

      <!-- Final navigation and submit -->
      <button type="button" onclick="prevStep()">Back</button>
      <button type="submit">Submit</button>
    </div>
  </form>

  <!-- JavaScript for form functionality -->
  <script>
    // Select all the steps in the form
    const steps = document.querySelectorAll(".step");

    // Keep track of which step is currently visible
    let currentStep = 0;

    // Function to show the current step
    function showStep(index) {
      steps.forEach((step, i) => {
        step.classList.toggle("active", i === index); // Show only the selected step
      });
    }

    // Go to the next step
    function nextStep() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      }
    }

    // Go to the previous step
    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    }

    // Handle the form submission
    document.getElementById("surveyForm").addEventListener("submit", function(e) {
      e.preventDefault(); // Stop the page from reloading

      // Convert the form data into JSON format
      const formData = new FormData(this);
      const jsonData = Object.fromEntries(formData.entries());

      // Send the data to your Google Sheets Web App endpoint
      fetch("https://script.google.com/macros/s/AKfycbznLuwjAyOJl0shDBZs_qmnXS6zJ40FjGpxrlKQJIr-qCqR2dUfy1vEGIWdHaCYrYaM/exec", {
        method: "POST",
        mode: "no-cors", // üõ°Ô∏è Bypasses CORS restriction (you won‚Äôt get a readable response back)
        body: JSON.stringify(jsonData),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(() => {
        // Show confirmation message
        alert("‚úÖ Thank you! Your response was saved.");
        // Reset form and go back to first step
        this.reset();
        currentStep = 0;
        showStep(currentStep);
      })
      .catch(error => {
        // Show error message in case something fails
        alert("‚ùå There was a problem. Try again.");
        console.error("Submission error:", error);
      });
    });
  </script>
</body>
</html>
